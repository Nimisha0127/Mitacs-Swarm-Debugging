<!DOCTYPE html>
<meta charset="utf-8">
<center><h1>Debugging Sessions</h1></center>
<script src="https://d3js.org/d3.v4.js"></script>
<style>
body {
  font: 12px sans-serif;
}
.button {
  background-color: #a05d56;
  border: none;
  color: white;
  padding: 10px 22px;
  text-align: center;
  text-decoration: none;
  display: inline-block;
  font-size: 16px;
  margin: 4px 2px;
  cursor: pointer;
  transition-duration: 0.4s;
}
.button:hover {
  box-shadow: 0 12px 16px 0 rgba(0,0,0,0.24),0 17px 50px 0 rgba(0,0,0,0.19);
}
}
.grid line {
    stroke: lightgrey;
    stroke-opacity: 0.6;
    shape-rendering: crispEdges
}
.grid path {
    stroke-width: 0;
}
</style>
<center>
<button class="button" onclick="update(data1)">Session 1</button>
<button class="button" onclick="update(data2)">Session 2</button>
<button class="button" onclick="update(data3)">Session 3</button>
<div id="my_dataviz"></div>
<script>

//Dataset 1
var data1 = [
  {
    "EventId": "e60..f11",
    "Stepinto": 35
  },
  {
    "EventId": "9c2..dd9",
    "Stepinto": 35
  },
  {
    "EventId": "8ff..63a",
    "Stepinto": 38
  },
  {
    "EventId": "1fa..8b0",
    "Stepinto": 40
  },
  {
    "EventId": "185..0e2",
    "Stepinto": 42
  },
  {
     "EventId": "eb9..047",
     "Stepinto": 70
}
];

//Dataset 2
var data2 = [
  {
    "EventId": "419..c2e",
    "Stepinto": 38
  },
  {
    "EventId": "236..e8b",
    "Stepinto": 57
  },
  {
    "EventId": "f09..c74",
    "Stepinto": 58
  },
  {
    "EventId": "576..52b",
    "Stepinto": 59
  },
  {
    "EventId": "7e6..304",
    "Stepinto": 60,
  },
  {
    "EventId": "064..037",
    "Stepinto": 62
  },
  {
    "EventId": "0a4..896",
    "Stepinto": 62
  },
  {
    "EventId": "ff6..9e2",
    "Stepinto": 66
}
];

//Dataset 3
var data3 = [
    {
      "EventId": "f59..2cd",
      "Stepinto": 14
    },
    {
      "EventId": "01b..47f",
      "Stepinto": 15
    },
    {
      "EventId": "fb6..d64",
      "Stepinto": 20
    },
    {
      "EventId": "ce2..55f",
      "Stepinto": 24
    },
    {
      "EventId": "ec4..b66",
      "Stepinto": 37
    },
    {
      "EventId": "df8..b96",
      "Stepinto": 38
    },
    {
      "EventId": "403..61c",
      "Stepinto": 39
    },
    {
      "EventId": "86a..f3e",
      "Stepinto": 24
    },
    {
      "EventId": "776..96c",
      "Stepinto": 25
    },
    {
      "EventId": "686..89f",
      "Stepinto": 42
    },
    {
      "EventId": "8b9..fd3",
      "Stepinto": 43
    },
    {
      "EventId": "ac8..463",
      "Stepinto": 44
    },
    {
      "EventId": "3f5..f19",
      "Stepinto": 25
    },
    {
      "EventId": "a00..4ba",
      "Stepinto": 27
    },
    {
      "EventId": "6f7..b7b",
      "Stepinto": 27
    },
    {
      "EventId": "36d..e18",
      "Stepinto": 27
    },
    {
      "EventId": "86d..273",
      "Stepinto": 27
    },
    {
      "EventId": "5b3..ce0",
      "Stepinto": 28
    },
    {
      "EventId": "2f0..632",
      "Stepinto": 29
    },
    {
      "EventId": "ac9..653",
      "Stepinto": 31
    },
    {
      "EventId": "b8c..b48",
      "Stepinto": 27
    },
    {
      "EventId": "f20..249",
      "Stepinto": 27
    },
    {
      "EventId": "066..bef",
      "Stepinto": 28
    },
    {
      "EventId": "019..e96",
      "Stepinto": 29
    },
    {
      "EventId": "4ed..c65",
      "Stepinto": 31
    },
    {
      "EventId": "f47..bdf",
      "Stepinto": 27
    },
    {
      "EventId": "fc0..27b",
      "Stepinto": 33
    },
    {
      "EventId": "b04..044",
      "Stepinto": 34
  }
];
var margin = {top: 30, right: 30, bottom: 70, left: 60},
    width = 1500 - margin.left - margin.right,
    height = 400 - margin.top - margin.bottom;

var svg = d3.select("#my_dataviz")
  .append("svg")
  .attr("width", width + margin.left + margin.right)
  .attr("height", height + margin.top + margin.bottom)
  .append("g")
  .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

function make_x_gridlines() {
    return d3.axisBottom(x)
     .ticks(8)}
function make_y_gridlines() {
    return d3.axisLeft(y)
    .ticks(5)}

// Initialize the X axis
var x = d3.scaleBand()
  .range([ 0, width ])
  .padding(0.2);
var xAxis = svg.append("g")
  .attr("transform", "translate(0," + height + ")")
svg.append("text")
  .attr("text-anchor", "middle")
  .attr("x", width-500)
  .attr("y", height + margin.top + 10)
  .text("Sequence of Events");

// Initialize the Y axis
var y = d3.scaleLinear()
  .range([ height, 0]);
var yAxis = svg.append("g")
  .attr("class", "myYaxis");
svg.append("text")
  .attr("transform", "rotate(-90)")
  .attr("y", -40)
  .attr("dy", ".71em")
  .style("text-anchor", "end")
  .text("Line of Code for StepInto");

svg.append("g")
  .attr("class","grid")
  .attr("transform","translate(0," + height + ")")
  .style("stroke-dasharray",("3,3"))
  .call(make_x_gridlines()
  .tickSize(-height)
  .tickFormat(""))

svg.append("g")
  .attr("class","grid")
  .style("stroke-dasharray",("3,3"))
  .call(make_y_gridlines()
  .tickSize(-width)
  .tickFormat(""))

// A function to create or update the plot for a given variable
function update(data) {

  // Update the X axis
  x.domain(data.map(function(d) { return d.EventId; }))
  xAxis.call(d3.axisBottom(x))

  // Update the Y axis
  y.domain([0, d3.max(data, function(d) { return d.Stepinto }) ]);
  yAxis.transition().duration(1000).call(d3.axisLeft(y));
  var u = svg.selectAll("rect")
    .data(data)

  u
    .enter()
    .append("rect")
    .merge(u)
    .transition()
    .duration(1000)
    .attr("x", function(d) { return x(d.EventId); })
    .attr("y", function(d) { return y(d.Stepinto); })
    .attr("width", x.bandwidth())
    .attr("height", function(d) { return height - y(d.Stepinto); })
    .attr("fill", "#8a89a6")
  u
    .exit()
    .remove()
}
update(data1)
</script>
</center>

